<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Selector de elementos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
    <h2>Selector de elementos por calorías y peso</h2>

    <form method="post">
        {% csrf_token %}
        <div class="mb-2">
            <label>Calorías mínimas:</label>
            <input type="number" name="min_calorias" min="0" class="form-control" required>
        </div>
        <div class="mb-2">
            <label>Peso máximo:</label>
            <input type="number" name="max_peso" class="form-control" required>
        </div>

        <h5>Elementos</h5>
        <div id="elementos">
            <div class="row mb-2">
                <div class="col">
                    <input type="text" name="nombre" class="form-control" placeholder="Nombre" required>
                </div>
                <div class="col">
                    <input type="number" name="peso" class="form-control" placeholder="Peso" required>
                </div>
                <div class="col">
                    <input type="number" name="calorias" class="form-control" placeholder="Calorías" required>
                </div>
            </div>
        </div>

        <button type="button" class="btn btn-sm btn-secondary mb-3" onclick="agregarElemento()">Agregar otro</button>
        <br>
        <button type="submit" class="btn btn-sm btn-primary">Calcular</button>
    </form>

    {% if resultado %}
        <hr>
        <h5>Mejor combinación encontrada:</h5>
        <ul>
            {% for e in resultado %}
                <li>{{ e.nombre }} - Peso: {{ e.peso }}, Calorías: {{ e.calorias }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <script>
        function agregarElemento() {
            const contenedor = document.getElementById('elementos');
            const fila = document.createElement('div');
            fila.className = 'row mb-2';
            fila.innerHTML = `
                <div class="col">
                    <input type="text" name="nombre" class="form-control" placeholder="Nombre" required>
                </div>
                <div class="col">
                    <input type="number" name="peso" class="form-control" placeholder="Peso" required>
                </div>
                <div class="col">
                    <input type="number" name="calorias" class="form-control" placeholder="Calorías" required>
                </div>
            `;
            contenedor.appendChild(fila);
        }
    </script>
</body>
</html>